{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./src/app.tsx","webpack:///./src/code/canvas/chord.ts","webpack:///./src/code/common/alerts.ts","webpack:///./src/code/common/guid.ts","webpack:///./src/code/data/guitar-string.ts","webpack:///./src/code/data/notes.ts","webpack:///./src/code/firebase/index.ts","webpack:///./src/components/chords/add-chord/barre/index.tsx","webpack:///./src/components/chords/add-chord/drawing-fret/index.tsx","webpack:///./src/components/chords/add-chord/guitar-strings/guitar-string.tsx","webpack:///./src/components/chords/add-chord/guitar-strings/index.tsx","webpack:///./src/components/chords/add-chord/index.tsx","webpack:///./src/components/chords/add-chord/instrument/index.tsx","webpack:///./src/components/chords/add-chord/name/index.tsx","webpack:///./src/components/chords/add-chord/notes/index.tsx","webpack:///./src/components/chords/add-chord/save-button/index.tsx","webpack:///./src/components/chords/add-chord/startFret/index.tsx","webpack:///./src/components/common/dialogs/snackbar/index.tsx","webpack:///./src/components/layout/page-layout.tsx","webpack:///./src/components/navigation/mobile/index.tsx","webpack:///./src/components/views/add-track.tsx","webpack:///./src/components/views/admin/add-chords/index.tsx","webpack:///./src/components/views/admin/index.tsx","webpack:///./src/components/views/chords.tsx","webpack:///./src/components/views/favourites.tsx","webpack:///./src/components/views/tracks.tsx","webpack:///./src/components/views/view-list.tsx","webpack:///./src/components/vk/layout/header/heade-and-back/index.tsx","webpack:///./src/pages.tsx","webpack:///./src/server.ts","webpack:///./src/server/auth.ts","webpack:///./src/server/common.ts","webpack:///./src/server/database.ts","webpack:///./src/server/vk.ts","webpack:///./src/ssr.tsx","webpack:///./src/stores/add-chords-store.ts","webpack:///./src/stores/global-store.ts","webpack:///./src/stores/snackbar.ts","webpack:///external \"@firebase/firestore\"","webpack:///external \"@vkontakte/icons\"","webpack:///external \"@vkontakte/vkui\"","webpack:///external \"crypto\"","webpack:///external \"express\"","webpack:///external \"express-useragent\"","webpack:///external \"firebase-admin\"","webpack:///external \"firebase/app\"","webpack:///external \"firebase/database\"","webpack:///external \"firebase/firestore\"","webpack:///external \"fs\"","webpack:///external \"mobx\"","webpack:///external \"mobx-react-lite\"","webpack:///external \"path\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-hot-loader\"","webpack:///external \"uuid\""],"names":["App","window","ChordCanvas","constructor","canvas","padding","context","getContext","draw","params","width","height","clear","drawEmptyFrets","strokeStyle","stringsColor","lineWidth","drawFrets","drawStrings","drawChords","drawDescription","y","topPadding","stepFrets","i","drawLine","x","stepStrings","guitarStrings","length","forEach","string","fretsColor","drawBarre","drawStringFrets","barre","strings","skipStrings","fret","startX","endX","startFret","fert","index","beginPath","fillStyle","arc","Math","PI","fill","strokeText","toString","startY","endY","moveTo","lineTo","stroke","clearRect","snackbar","message","callback","SnackbarsStore","showSnackbar","createGuid","uuidv4","stringsByCount","notes","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","init","app","initializeApp","analytics","database","getDatabase","firestore","getFirestore","BarreField","observer","Store","event","changeProperty","Fret","useRef","chordParams","chordCanvasRef","useEffect","current","chordCanvas","instrument","console","log","display","justifyContent","GuitarStringField","changeFret","data","useMemo","start","label","value","push","some","item","option","restProps","target","GuitarStringFields","map","changeString","AddChordsForm","InstrumentField","changeInstrtument","name","NameField","NotesField","note","changeNote","SaveButton","saveChord","StartFretField","fretsData","frets","SnackbarContainer","currentSnackbar","close","Layout","children","platform","usePlatform","hasHeader","VKCOM","MobileNav","pages","page","key","GlobalStore","setActiveStory","activeStory","iconComponent","AddTrackView","AddChordsView","AdminView","setActivePanel","ChordsView","FavouritesView","TracksView","props","ViewList","activePanel","HeaderWithBack","toMainPanel","express","use","useragent","get","static","__dirname","req","res","html","getApp","source","isValidVk","validateVK","adminToken","fireBaseToken","contentType","status","send","listen","createFirebaseToken","query","store","isDev","process","env","NODE_ENV","Database","config","JSON","parse","fs","readFileSync","resolve","admin","validateVkParams","vkParams","sign","startsWith","vkParamsString","join","paramsHash","crypto","createHmac","secret","update","digest","replace","userAgent","jsx","reactHtml","renderToString","getHtml","defauiltParams","mode","AddChordsStore","fillParams","makeAutoObservable","undefined","deep","bind","prop","fillStrings","property","find","isNaN","guitarStringsCount","result","addDoc","collection","initDatabase","firebase","makeObservable","observable","panel","globalStore","snackbars","id","closeSnackbar","_snackbar","filter"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/server.ts\");\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import React from 'react'\r\nimport ReactDom from 'react-dom'\r\nimport { AppRoot, Panel, View } from '@vkontakte/vkui'\r\nimport { AdaptivityProvider, ConfigProvider } from '@vkontakte/vkui'\r\n\r\ndeclare var window: any\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css'\r\n\r\nimport Layout from './components/layout/page-layout'\r\nimport ViewList from './components/views/view-list'\r\n\r\ndeclare global {\r\n  interface Window {\r\n\r\n  }\r\n}\r\n\r\nconst App: React.FC = () => {\r\n\r\n  return (\r\n    <ConfigProvider>\r\n      <AdaptivityProvider>\r\n        <AppRoot>\r\n          <Layout >\r\n            <ViewList />\r\n          </Layout>\r\n        </AppRoot>\r\n      </AdaptivityProvider>\r\n    </ConfigProvider>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { iParams as iChordParams } from '../../stores/add-chords-store'\r\n\r\nclass ChordCanvas {\r\n\r\n    canvas: HTMLCanvasElement\r\n    context: CanvasRenderingContext2D\r\n\r\n    params: iChordParams\r\n\r\n    stepStrings: number\r\n    stepFrets: number\r\n    padding: number = 10\r\n    topPadding: number = this.padding * 2\r\n\r\n    stringsColor = 'black'\r\n    fretsColor = '#99a2ad'\r\n\r\n    constructor(canvas: HTMLCanvasElement) {\r\n        this.canvas = canvas\r\n        this.context = this.canvas.getContext('2d')!\r\n    }\r\n\r\n    draw(params: iChordParams, width: number, height: number) {\r\n\r\n        this.params = params\r\n        this.canvas.width = width\r\n        this.canvas.height = height\r\n\r\n        this.clear()\r\n        this.drawEmptyFrets()\r\n    }\r\n\r\n    drawEmptyFrets() {\r\n\r\n        this.context.strokeStyle = this.stringsColor\r\n        this.context.lineWidth = 1\r\n\r\n        this.drawFrets()\r\n        this.drawStrings()\r\n        this.drawChords()\r\n\r\n        this.drawDescription()\r\n    }\r\n\r\n    drawFrets() {\r\n\r\n        let y = this.topPadding\r\n        this.stepFrets = (this.canvas.height - this.padding - y) / 5\r\n\r\n        for(let i = 0; i <= 5; i++) {\r\n            this.drawLine(this.padding, y, this.canvas.width - this.padding, y)\r\n            y += this.stepFrets\r\n        }\r\n    }\r\n\r\n    drawStrings() {\r\n\r\n        let x = this.canvas.width - this.padding\r\n        this.stepStrings = (x - this.padding) / (this.params.guitarStrings.length - 1)\r\n\r\n        this.params.guitarStrings.forEach((string) => {\r\n            this.drawLine(x, this.topPadding, x, this.canvas.height - this.padding)\r\n            x -= this.stepStrings\r\n        })\r\n    }\r\n\r\n    drawChords() {\r\n\r\n        this.context.strokeStyle = this.fretsColor\r\n        this.context.lineWidth = 7\r\n\r\n        this.drawBarre()\r\n        this.drawStringFrets()\r\n    }\r\n\r\n    drawBarre() {\r\n\r\n        if(!this.params.barre) return\r\n\r\n        const strings = this.params.guitarStrings\r\n\r\n        let skipStrings = 0\r\n\r\n        for(let i = strings.length - 1; i >= 0; i--) {\r\n                \r\n            if(strings[i].fret !== 'notPlayed') {\r\n                break\r\n            }\r\n\r\n            skipStrings++\r\n        }\r\n\r\n        const startX = this.padding + (skipStrings * this.stepStrings) - 2\r\n        const endX = this.canvas.width - this.padding + 2\r\n        const y = this.topPadding + (this.stepFrets / 2)\r\n\r\n        this.drawLine(startX, y, endX, y)\r\n    }\r\n\r\n    drawStringFrets() {\r\n\r\n        const strings = this.params.guitarStrings\r\n\r\n        for(let i = strings.length - 1; i >= 0; i--) {\r\n\r\n            const string = strings[i]\r\n\r\n            if(string.fret === 'notPlayed' || string.fret === this.params.startFret) continue\r\n            \r\n            const fert: number = string.fret as number\r\n\r\n            const x = this.canvas.width - this.padding - ((string.index - 1) * this.stepStrings)\r\n            const y = this.topPadding + ((fert - (this.params.startFret + 1)) * this.stepFrets) + (this.stepFrets / 2)\r\n\r\n            this.context.beginPath()\r\n\r\n            this.context.fillStyle = this.fretsColor\r\n            this.context.arc(x, y, 5, 0, Math.PI * 2)\r\n            this.context.fill()\r\n\r\n            this.context.beginPath()\r\n        }\r\n    }\r\n\r\n    drawDescription() {\r\n\r\n        if(this.params.startFret !== 0) {\r\n            this.context.lineWidth = 0.75\r\n            this.context.strokeText(this.params.startFret.toString(), this.padding - 10, (this.topPadding / 2) - 2)\r\n        }\r\n\r\n        for(let i = this.params.guitarStrings.length - 1; i >= 0; i--) {\r\n\r\n            const string = this.params.guitarStrings[i]\r\n\r\n            if(string.fret !== 'notPlayed') continue\r\n\r\n            const x = this.canvas.width - this.padding - ((string.index - 1) * this.stepStrings)\r\n\r\n            this.context.lineWidth = 0.5\r\n            this.context.strokeText('X', x - 2.5, this.topPadding - 2)\r\n        }\r\n    }\r\n\r\n    drawLine(startX: number, startY: number, endX: number, endY: number) {\r\n\r\n        this.context.beginPath()\r\n\r\n        this.context.moveTo(startX, startY)\r\n        this.context.lineTo(endX, endY)\r\n        this.context.stroke()\r\n\r\n        this.context.beginPath()\r\n    }\r\n\r\n    clear() {\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n        this.context.beginPath()\r\n    }\r\n}\r\n\r\nexport default ChordCanvas","import SnackbarsStore, { iSnackbar } from '../../stores/snackbar'\r\n\r\nexport const snackbar = (message: string, callback?: () => void) => {\r\n    return SnackbarsStore.showSnackbar({ message, callback })\r\n}","import { v4 as uuidv4 } from 'uuid'\r\n\r\nexport const createGuid = () => {\r\n    return uuidv4()\r\n}","export const stringsByCount = ['', 'Первая', 'Вторая', 'Третья', 'Четвертая', 'Пятая', 'Шестая']","export const notes = [\r\n    'C',\r\n    'C#',\r\n    'D',\r\n    'D#',\r\n    'E',\r\n    'F',\r\n    'F#',\r\n    'G',\r\n    'G#',\r\n    'A',\r\n    'A#',\r\n    'B'\r\n]","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from 'firebase/app'\r\nimport { getAnalytics } from 'firebase/analytics'\r\nimport { getDatabase } from 'firebase/database'\r\nimport { getFirestore, collection } from 'firebase/firestore'\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAG70Q8XMvKfSU48NLjICNcHxm4w1LGGiU\",\r\n  authDomain: \"chords-test-c25b3.firebaseapp.com\",\r\n  projectId: \"chords-test-c25b3\",\r\n  storageBucket: \"chords-test-c25b3.appspot.com\",\r\n  messagingSenderId: \"961783308721\",\r\n  appId: \"1:961783308721:web:265426d5c87511d98add90\"\r\n};\r\n\r\nconst init = () => {\r\n\r\n    // Initialize Firebase\r\n    const app = initializeApp(firebaseConfig)\r\n    const analytics: string =null// = getAnalytics(app)\r\n    const database = getDatabase(app)\r\n    const firestore = getFirestore(app)\r\n\r\n    return { app, database, firestore, analytics }\r\n}\r\n\r\nexport default init","import React, { useMemo } from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { Checkbox } from '@vkontakte/vkui'\r\n\r\nimport Store from '../../../../stores/add-chords-store'\r\n\r\nconst BarreField: React.FC = observer(() => {\r\n\r\n    return (\r\n        <Checkbox checked={Store.barre} onChange={event => Store.changeProperty('barre', !Store.barre)}>Баррэ</Checkbox>\r\n    )\r\n})\r\n\r\nexport default BarreField","import React, { useEffect, useRef, useMemo } from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { Div } from '@vkontakte/vkui'\r\n\r\nimport Store from '../../../../stores/add-chords-store'\r\nimport ChordCanvas from '../../../../code/canvas/chord'\r\n\r\nconst Fret: React.FC = observer(() => {\r\n\r\n    const canvas = useRef<HTMLCanvasElement>(null)\r\n    const params = Store.chordParams\r\n\r\n    const chordCanvasRef = useRef<ChordCanvas>()\r\n\r\n    useEffect(() => {\r\n        Store.canvas = chordCanvasRef.current = new ChordCanvas(canvas.current!)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        const chordCanvas = chordCanvasRef.current!\r\n        chordCanvas.draw(params, params.instrument === 'ukulele' ? 90 : 110, 170)\r\n\r\n    }, [params])\r\n\r\n    console.log('rerender')\r\n\r\n    return (\r\n        <Div style={{display: 'flex', justifyContent: 'center'}}>\r\n            <canvas ref={canvas} width={110} height={170}/>\r\n        </Div> \r\n    )\r\n\r\n})\r\n\r\nexport default Fret","import React, { useMemo, forwardRef } from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { CustomSelectOption, FormItem, Select, SliderSwitch } from '@vkontakte/vkui'\r\n\r\nimport { stringsByCount } from '../../../../code/data/guitar-string'\r\n\r\ninterface iProps {\r\n    barre: boolean\r\n    startFret: number\r\n    fret: number | string\r\n    index: number\r\n    changeFret: (fret: string) => void\r\n}\r\n\r\nconst GuitarStringField: React.FC<iProps> = ({ fret, index, barre, startFret, changeFret }) => {\r\n           \r\n    const data = useMemo(() => {\r\n\r\n        const start = barre ? startFret + 1 : startFret\r\n\r\n        let data = [\r\n            { label: 'Не играется', value: 'notPlayed' },\r\n            { label: 'Открытая', value: startFret }\r\n        ]\r\n\r\n        for(let i = start + 1; i <= start + (barre ? 4 : 5); i++) {\r\n            data.push({ label: i.toString(), value: i })\r\n        }\r\n\r\n        return data\r\n        \r\n    }, [startFret, barre, fret])\r\n\r\n    if(!data.some(item => item.value === fret)) {\r\n        changeFret(data[1].value as any)\r\n    }\r\n\r\n    return (\r\n        \r\n        <FormItem top={`${stringsByCount[index]} струна`}>\r\n\r\n            <Select\r\n                value={fret}\r\n                options={data}\r\n                renderOption={({ option, ...restProps }) => (<CustomSelectOption {...restProps} />)}\r\n                onChange={event => changeFret(event.target.value)}\r\n            />\r\n\r\n        </FormItem>\r\n    )\r\n}\r\n\r\nexport default GuitarStringField","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { FormItem, SliderSwitch } from '@vkontakte/vkui'\r\n\r\nimport { MusicalInstrument } from '../../../../types/global-types'\r\nimport Store from '../../../../stores/add-chords-store'\r\n\r\nimport String from './guitar-string'\r\n\r\n\r\nconst GuitarStringFields: React.FC = observer(() => {\r\n\r\n    return (\r\n\r\n        <>\r\n\r\n            {\r\n                Store.guitarStrings.map(string =>\r\n                    \r\n                    <String\r\n                        key={string.index}\r\n                        fret={string.fret}\r\n                        index={string.index}\r\n                        barre={Store.barre}\r\n                        startFret={Store.startFret}\r\n                        changeFret={(fret) => Store.changeString(string.index, fret)}\r\n                    />)\r\n            }\r\n\r\n        </>\r\n    )\r\n})\r\n\r\nexport default GuitarStringFields","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { CellButton, Group, Panel, PanelHeader, PanelHeaderClose, View, FormLayout, FormItem, SliderSwitch, Select, CustomSelectOption, PanelHeaderSubmit } from '@vkontakte/vkui'\r\n\r\nimport { notes } from '../../../code/data/notes'\r\n\r\nimport HeaderWithBack from '../../vk/layout/header/heade-and-back'\r\nimport Canvas from './drawing-fret'\r\nimport Instrument from './instrument'\r\nimport Notes from './notes'\r\nimport Name from './name'\r\nimport StartFret from './startFret'\r\nimport Barre from './barre'\r\nimport GuitarStrings from './guitar-strings'\r\nimport SaveButton from './save-button'\r\n\r\nconst AddChordsForm: React.FC = observer(() => {\r\n\r\n    return (\r\n        <FormLayout>\r\n      \r\n            <HeaderWithBack>\r\n                Добавить аккорд\r\n            </HeaderWithBack>\r\n\r\n            <Group>\r\n\r\n                <Instrument/>\r\n                <Notes />\r\n                <Name />\r\n\r\n                <Canvas />\r\n\r\n                <SaveButton />\r\n\r\n                <StartFret />\r\n                <Barre />\r\n                <GuitarStrings />\r\n                \r\n            </Group>\r\n\r\n        </FormLayout >\r\n    )\r\n})\r\n\r\nexport default AddChordsForm","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { FormItem, SliderSwitch } from '@vkontakte/vkui'\r\n\r\nimport { MusicalInstrument } from '../../../../types/global-types'\r\nimport Store from '../../../../stores/add-chords-store'\r\n\r\nconst InstrumentField: React.FC = observer(() => {\r\n\r\n    return (\r\n        <FormItem top='Инструмент'>\r\n            <SliderSwitch\r\n                activeValue={Store.instrument}\r\n                onSwitch={ value => Store.changeInstrtument(value as MusicalInstrument)}\r\n                options={[\r\n                    {\r\n                        name: 'Гитара',\r\n                        value: 'guitar',\r\n                    },\r\n                    {\r\n                        name: 'Укулеле',\r\n                        value: 'ukulele',\r\n                    },\r\n                ]}\r\n            />\r\n        </FormItem>\r\n    )\r\n})\r\n\r\nexport default InstrumentField","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { FormItem, Select, CustomSelectOption, Input } from '@vkontakte/vkui'\r\n\r\nimport { notes } from '../../../../code/data/notes'\r\nimport Store from '../../../../stores/add-chords-store'\r\n\r\nconst NameField: React.FC = observer(() => {\r\n\r\n    return (\r\n \r\n        <FormItem top='Название'>\r\n            <Input value={Store.name} onChange={event => Store.changeProperty('name', event.target.value)} />\r\n        </FormItem>\r\n    )\r\n}) \r\n\r\nexport default NameField","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { FormItem, Select, CustomSelectOption } from '@vkontakte/vkui'\r\n\r\nimport { notes } from '../../../../code/data/notes'\r\nimport Store from '../../../../stores/add-chords-store'\r\n\r\nconst NotesField: React.FC = observer(() => {\r\n\r\n    return (\r\n\r\n        <FormItem top='Нота'>\r\n\r\n            <Select\r\n                value={Store.note}\r\n                options={notes.map(note => ({ label: note, value: note }))}\r\n                renderOption={({ option, ...restProps }) => (<CustomSelectOption {...restProps} />)}\r\n                onChange={event => Store.changeNote(event.target.value)}\r\n            />\r\n\r\n        </FormItem>\r\n    )\r\n})\r\n\r\nexport default NotesField","import React, { useMemo } from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { FormItem, Select, CustomSelectOption, CellButton  } from '@vkontakte/vkui'\r\n\r\nimport Store from '../../../../stores/add-chords-store'\r\n\r\nconst SaveButton: React.FC = observer(() => {\r\n\r\n    return (\r\n\r\n        <CellButton centered onClick={Store.saveChord}> \r\n                Сохранить аккорд\r\n        </CellButton>\r\n    )\r\n})\r\n\r\nexport default SaveButton","import React, { useMemo } from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { FormItem, Select, CustomSelectOption } from '@vkontakte/vkui'\r\n\r\nimport Store from '../../../../stores/add-chords-store'\r\n\r\nconst StartFretField: React.FC = observer(() => {\r\n\r\n    const fretsData = useMemo(() => {\r\n\r\n        let frets = []\r\n\r\n        for(let i = 0; i <= 8; i++) {\r\n            frets.push(i)\r\n        }\r\n\r\n        return frets\r\n\r\n    }, [])\r\n\r\n    return (\r\n\r\n        <FormItem top={`Начальный лад`}>\r\n\r\n            <Select\r\n                value={Store.startFret}\r\n                options={fretsData.map(fret => ({ label: fret.toString(), value: fret }))}\r\n                renderOption={({ option, ...restProps }) => (<CustomSelectOption {...restProps} />)}\r\n                onChange={event => Store.changeProperty('startFret', +event.target.value)}\r\n            />\r\n \r\n        </FormItem>\r\n    )\r\n})\r\n\r\nexport default StartFretField","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\n\r\nimport Store from '../../../../stores/snackbar'\r\nimport { Snackbar } from '@vkontakte/vkui'\r\n\r\nconst SnackbarContainer: React.FC = observer(() => {\r\n    \r\n    const current = Store.currentSnackbar\r\n    if(!current) return null\r\n\r\n    return (\r\n        <Snackbar\r\n        onClose={current.close}\r\n      >\r\n        {current.message}\r\n      </Snackbar>\r\n    )\r\n})\r\n\r\nexport default SnackbarContainer","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { Epic, PanelHeader, SplitCol, SplitLayout, useAdaptivity, usePlatform, ViewWidth, VKCOM } from '@vkontakte/vkui'\r\n\r\nimport GlobalStore from '../../stores/global-store'\r\n\r\nimport DesktopNav from '../navigation/desktop'\r\nimport MobileNav from '../navigation/mobile'\r\n\r\ninterface iProps {\r\n    children: JSX.Element[]\r\n}\r\n\r\nconst Layout: React.FC = observer(({ children }) => {\r\n\r\n    const platform = usePlatform();\r\n    const hasHeader = platform !== VKCOM;\r\n\r\n    return (\r\n\r\n        <SplitLayout\r\n            header={hasHeader && <PanelHeader separator={false} />}\r\n            style={{ justifyContent: \"center\" }}\r\n        >\r\n            \r\n            <SplitCol\r\n                width={'100%'}\r\n                maxWidth={'100%'}\r\n            >\r\n                \r\n                    {children}\r\n                \r\n            </SplitCol>\r\n        </SplitLayout>\r\n\r\n    )\r\n})\r\n\r\nexport default Layout","import React from 'react'\r\nimport { Tabbar, TabbarItem } from '@vkontakte/vkui'\r\nimport { observer } from 'mobx-react-lite'\r\n\r\nimport isDesktopHook from '../../../hooks/isDesktop'\r\nimport GlobalStore from '../../../stores/global-store'\r\n\r\nimport { pages } from '../../../pages'\r\n\r\nconst MobileNav: React.FC = observer(() => {\r\n\r\n    return (\r\n        <Tabbar>\r\n\r\n            {\r\n                pages.map(page => \r\n\r\n                    <TabbarItem\r\n                        key={page.key}\r\n                        onClick={() => GlobalStore.setActiveStory(page.key)}\r\n                        selected={GlobalStore.activeStory === page.key}\r\n                        data-story={page.key}\r\n                        text={page.name}\r\n                    >\r\n                        {page.iconComponent}\r\n                    </TabbarItem>\r\n                )\r\n            }\r\n\r\n        </Tabbar>\r\n    )\r\n})\r\n\r\nexport default MobileNav\r\n\r\n","import React from 'react'\r\nimport { Panel, PanelHeader, View } from '@vkontakte/vkui'\r\n\r\nconst AddTrackView: React.FC = () => {\r\n\r\n    return (\r\n      <>\r\n\r\n        <PanelHeader>Добавить трек</PanelHeader>\r\n\r\n        \r\n      </>\r\n    )\r\n\r\n}\r\n\r\nexport default AddTrackView","import React from 'react'\r\n\r\nimport AddChordsForm from '../../../chords/add-chord'\r\nimport Snackbar from '../../../common/dialogs/snackbar'\r\n\r\nconst AddChordsView: React.FC = () => {\r\n\r\n    return (\r\n        <>\r\n        <AddChordsForm />\r\n        <Snackbar />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddChordsView","import React from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { CellButton, Group, Panel, PanelHeader, View } from '@vkontakte/vkui'\r\nimport GlobalStore from '../../../stores/global-store'\r\n\r\n\r\nconst AdminView: React.FC = observer(() => {\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader>Администрирование</PanelHeader>\r\n\r\n            <Group>\r\n            \r\n            <CellButton onClick={ () => GlobalStore.setActivePanel('addChords') }>\r\n                Добавить аккорд\r\n            </CellButton>\r\n        \r\n            </Group>\r\n\r\n        </>\r\n    )\r\n})\r\n\r\nexport default AdminView","import { Panel, PanelHeader, View } from '@vkontakte/vkui'\r\nimport React from 'react'\r\n\r\nconst ChordsView: React.FC = () => {\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader>Аккорды</PanelHeader>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default ChordsView","import { Panel, PanelHeader, View } from '@vkontakte/vkui'\r\nimport React from 'react'\r\n\r\nconst FavouritesView: React.FC = () => {\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader>Администрирование</PanelHeader>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default FavouritesView","import { Panel, View, PanelHeader } from '@vkontakte/vkui'\r\nimport React from 'react'\r\n\r\nconst TracksView: React.FC = (props) => {\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader>Треки</PanelHeader>\r\n\r\n            tracks\r\n        </>   \r\n    )  \r\n}\r\n\r\nexport default TracksView","import React from 'react'\r\nimport { Icon28ClipOutline, Icon28MessageOutline, Icon28ServicesOutline, Icon28UserCircleOutline, Icon56NewsfeedOutline } from '@vkontakte/icons'\r\nimport { Epic, Group, Panel, PanelHeader, PanelHeaderBack, Placeholder, Root, View } from '@vkontakte/vkui'\r\n\r\nimport { observer } from 'mobx-react-lite'\r\nimport GlobalStore from '../../stores/global-store'\r\n\r\nimport Tracks from './tracks'\r\nimport Chords from './chords'\r\nimport Favourites from './favourites'\r\nimport AddTrack from './add-track'\r\nimport Admin from './admin'\r\nimport AdminAddChords from './admin/add-chords'\r\n\r\nimport MobileNav from '../navigation/mobile'\r\n\r\nconst ViewList: React.FC = observer(() => {\r\n\r\n  return (\r\n\r\n    <Epic activeStory={GlobalStore.activeStory} tabbar={<MobileNav />}>\r\n\r\n      <View id='tracks' activePanel={GlobalStore.activePanel}>\r\n        <Panel id='tracks'>\r\n          <Tracks />\r\n        </Panel>\r\n      </View >\r\n\r\n      <View id='chords' activePanel={GlobalStore.activePanel}>\r\n        <Panel id='chords'>\r\n          <Chords />\r\n        </Panel>\r\n      </View >\r\n\r\n      <View id='favourites' activePanel={GlobalStore.activePanel}>\r\n        <Panel id='favourites'>\r\n          <Favourites />\r\n        </Panel>\r\n      </View >\r\n\r\n      <View id='addTrack' activePanel={GlobalStore.activePanel}>\r\n        <Panel id='addTrack'>\r\n          <AddTrack />\r\n        </Panel>\r\n      </View >\r\n\r\n      <View id='admin' activePanel={GlobalStore.activePanel}>\r\n        <Panel id='admin'>\r\n          <Admin />\r\n        </Panel>\r\n        <Panel id='addChords'>\r\n          <AdminAddChords />\r\n        </Panel>\r\n      </View >\r\n\r\n    </Epic>\r\n  )\r\n})\r\n\r\nexport default ViewList","import React, { Children } from 'react'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { PanelHeader, PanelHeaderClose, PanelHeaderProps } from '@vkontakte/vkui'\r\n\r\nimport GlobalStore from '../../../../../stores/global-store'\r\n\r\n\r\nconst HeaderWithBack: React.FC<PanelHeaderProps> = observer((props) => {\r\n\r\n    return (\r\n        <PanelHeader\r\n            left={<PanelHeaderClose onClick={() => GlobalStore.toMainPanel() }/>}\r\n            {...props}\r\n        >\r\n           {props.children}\r\n        </PanelHeader> \r\n    )\r\n})\r\n\r\nexport default HeaderWithBack","import React from 'react'\r\nimport { Icon28PlaylistOutline, Icon28MusicOutline, Icon28FavoriteOutline, Icon28AddSquareOutline, Icon28SettingsOutline } from '@vkontakte/icons'\r\nimport { JsxElement } from 'typescript'\r\n\r\nexport type iPageKey = 'tracks' | 'chords' | 'favourites' | 'addTrack' | 'admin'\r\n\r\nexport interface iPage {\r\n  key: iPageKey\r\n  name: string\r\n  iconComponent: JSX.Element\r\n}\r\n\r\nexport const pages: iPage[] = [\r\n    {\r\n        key: 'tracks',\r\n        name: 'Треки',\r\n        iconComponent: <Icon28PlaylistOutline />\r\n    },\r\n    {\r\n      key: 'chords',\r\n      name: 'Аккорды',\r\n      iconComponent: <Icon28MusicOutline />\r\n    },\r\n    {\r\n      key: 'favourites',\r\n      name: 'Избранное',\r\n      iconComponent: <Icon28FavoriteOutline />\r\n    },\r\n    {\r\n      key: 'addTrack',\r\n      name: 'Добавить трек',\r\n      iconComponent: <Icon28AddSquareOutline />\r\n    },\r\n    {\r\n      key: 'admin',\r\n      name: 'Администрирование',\r\n      iconComponent: <Icon28SettingsOutline />\r\n    }\r\n]\r\n\r\n","import express from 'express'\r\nimport useragent from 'express-useragent'\r\nimport database from './server/database'\r\nimport validateVK from './server/vk'\r\nimport fireBaseToken from './server/auth'\r\n\r\nimport getApp from './ssr'\r\n\r\nconst app = express()\r\napp.use(useragent.express())\r\n\r\ndatabase.init()\r\n\r\napp.get(/\\.(js|css|map|ico)$/, express.static(__dirname))\r\napp.use('*', async (req, res) => {\r\n\r\n    const html = getApp(req['useragent'].source)\r\n\r\n    const isValidVk = validateVK(req)\r\n\r\n    const adminToken = isValidVk ? await fireBaseToken(req) : null\r\n    \r\n    res.contentType('text/html')\r\n    res.status(200)\r\n\r\n    return res.send(html)\r\n})\r\n\r\napp.listen('9000', () => {\r\n    console.log('Сервер на порту 9000')\r\n})","import { async } from '@firebase/util'\r\nimport { firestore } from 'firebase-admin'\r\nimport database from './database'\r\n\r\nconst createFirebaseToken = async (req) => {\r\n\r\n    const query = req.query\r\n    const store = firestore(database.app)\r\n\r\n    //const y = await store.listCollections()\r\n\r\n    //console.log(y)\r\n\r\n}\r\n\r\nexport default createFirebaseToken","export const isDev = () => process.env.NODE_ENV === 'development'","import admin, { auth } from 'firebase-admin'\r\nimport fs from 'fs'\r\nimport { resolve } from 'path'\r\n\r\nclass Database {\r\n\r\n    app: admin.app.App\r\n\r\n    init() {\r\n        const config = JSON.parse(fs.readFileSync(resolve(__dirname, '..', 'private/service-account-key.json')).toString('utf8'))\r\n        this.app = admin.initializeApp(config)\r\n        //this.app.auth()\r\n    }\r\n}\r\n\r\nconst database = new Database()\r\nexport default database","import crypto from 'crypto'\r\nimport fs from 'fs'\r\nimport { isDev } from './common'\r\nimport { resolve } from 'path'\r\n\r\nconst config = JSON.parse(fs.readFileSync(resolve(__dirname, '..', 'private/vk-secret-key.json')).toString('utf8'))\r\n\r\nconst validateVkParams = (req) => {\r\n\r\n    if(isDev) return true\r\n\r\n    const query = req.query\r\n    let vkParams = []\r\n\r\n    const sign: string = query.sign\r\n\r\n    if(!sign) return false\r\n\r\n    for(let key in query) {\r\n\r\n        if(key.startsWith('vk_')) {\r\n            vkParams.push(`${key}=${query[key]}`)\r\n        }\r\n    }\r\n\r\n    const vkParamsString = vkParams.join('&')\r\n\r\n    const paramsHash = crypto\r\n    .createHmac('sha256', config.secret)\r\n    .update(vkParamsString)\r\n    .digest()\r\n    .toString('base64')\r\n    .replace(/\\+/g, '-')\r\n    .replace(/\\//g, '_')\r\n    .replace(/=$/, '')\r\n\r\n    return paramsHash === sign\r\n}\r\n\r\nexport default validateVkParams","import React from 'react'\r\nimport { renderToString } from 'react-dom/server'\r\nimport { SSRWrapper } from '@vkontakte/vkui'\r\n\r\nimport App from './app'\r\n\r\nexport default (userAgent) => {\r\n\r\n    const jsx = <SSRWrapper userAgent={userAgent}>\r\n        <App/>\r\n    </SSRWrapper>\r\n    const reactHtml = renderToString(jsx)\r\n\r\n    return getHtml(reactHtml)\r\n}\r\n\r\nconst getHtml = (reactHtml) => {\r\n\r\n    return `\r\n    <!DOCTYPE html>\r\n    <html lang=\"en\">\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\r\n        <link rel=\"shortcut icon\" type=\"image/png\" href=\"/images/favicon.jpg\">\r\n        <title>Аккорды</title>\r\n        <link href=\"/main.css\" rel=\"stylesheet\">\r\n    </head>\r\n    <body>\r\n        <script>\r\n            window['isAdmin'] = true;\r\n            window['vkVerify'] = true;\r\n        </script>\r\n\r\n        <div id=\"root\" class=\"vkui__root\">${reactHtml}</div> \r\n        <script src=\"/main.js\"></script>\r\n    </body>\r\n    </html>\r\n    `\r\n}","import { makeAutoObservable } from 'mobx'\r\nimport { iPageKey, pages } from '../pages'\r\nimport { MusicalInstrument } from '../types/global-types'\r\nimport { notes } from '../code/data/notes'\r\n\r\nimport ChordCanvas from '../code/canvas/chord'\r\nimport GlobalStore from './global-store'\r\nimport { collection, addDoc } from '@firebase/firestore'\r\nimport { snackbar } from '../code/common/alerts'\r\n\r\ntype Mode = 'add' | 'edit'\r\n\r\nexport interface iParams {\r\n    mode: Mode\r\n    instrument: MusicalInstrument\r\n    note: string\r\n    name: string\r\n    startFret: number\r\n    barre: boolean\r\n    guitarStrings: iGuitarString[]\r\n}\r\n\r\nexport interface iGuitarString {\r\n    index: number,\r\n    fret: number | string\r\n}\r\n\r\nconst defauiltParams: iParams = {\r\n    mode: 'add',\r\n    instrument: 'guitar',\r\n    note: notes[0],\r\n    name: notes[0],\r\n    startFret: 0,\r\n    barre: false,\r\n    guitarStrings: []\r\n}\r\n\r\nexport class AddChordsStore implements iParams {\r\n\r\n    mode: Mode\r\n    instrument: MusicalInstrument\r\n    note: string \r\n    name: string\r\n    startFret: number\r\n    barre: boolean\r\n\r\n    canvas: ChordCanvas\r\n\r\n    guitarStrings!: iGuitarString[]\r\n\r\n    constructor(params: iParams = defauiltParams) {\r\n\r\n        this.fillParams(params)\r\n        makeAutoObservable(this, undefined, { deep: true })\r\n\r\n        this.saveChord = this.saveChord.bind(this)\r\n    }\r\n\r\n    fillParams(params: iParams) {\r\n\r\n        for (let prop in params) {\r\n            this[prop as keyof this] = params[prop as keyof iParams] as any\r\n        }\r\n\r\n        if (!this.guitarStrings.length) {\r\n            this.fillStrings()\r\n        }\r\n    }\r\n\r\n    changeProperty(property: keyof iParams, value: any) {\r\n        this[property as keyof this] = value\r\n    }\r\n\r\n    changeNote(note: string) {\r\n        this.note = note\r\n        this.name = this.note\r\n    }\r\n\r\n    changeString(index: number, fret: string) {\r\n\r\n        const string = this.guitarStrings.find(string => string.index === index)\r\n\r\n        if (string) {\r\n            string.fret = isNaN(fret as any) ? fret : +fret\r\n        }\r\n\r\n        this.guitarStrings = [...this.guitarStrings]\r\n    }\r\n\r\n    changeInstrtument(instrument: MusicalInstrument) {\r\n        this.instrument = instrument\r\n        this.fillStrings()\r\n    }\r\n\r\n    fillStrings() {\r\n\r\n        const guitarStringsCount = this.instrument === 'guitar' ? 6 : 4\r\n        this.guitarStrings = []\r\n\r\n        for (let i = 1; i <= guitarStringsCount; i++) {\r\n            this.guitarStrings.push({ index: i, fret: 0 })\r\n        }\r\n    }\r\n\r\n    async saveChord() {\r\n        \r\n        const firestore = GlobalStore.firestore\r\n\r\n        const result = await addDoc(collection(firestore, `chords/${this.note}/${this.name}`), this.chordParams)\r\n        console.log(result)\r\n        \r\n        snackbar('Добавили аккорд')\r\n        this.fillParams(defauiltParams) \r\n    }\r\n\r\n    get chordParams(): iParams {\r\n\r\n        const params: iParams = {\r\n            mode: this.mode,\r\n            instrument: this.instrument,\r\n            note: this.note,\r\n            name: this.name,\r\n            startFret: this.startFret,\r\n            barre: this.barre,\r\n            guitarStrings: [...this.guitarStrings]\r\n        }\r\n\r\n        return params\r\n    }\r\n}\r\n\r\nconst store = new AddChordsStore()\r\nexport default store","import { makeAutoObservable, makeObservable, observable } from 'mobx'\r\nimport { FirebaseApp } from 'firebase/app'\r\nimport { Analytics } from 'firebase/analytics'\r\nimport initDatabase from '../code/firebase'\r\nimport { iPageKey, pages } from '../pages'\r\nimport { Database, getDatabase } from 'firebase/database'\r\nimport { Firestore } from '@firebase/firestore'\r\n\r\nexport class GlobalStore {\r\n\r\n    activeStory: iPageKey = pages[0].key\r\n    activePanel: string = pages[0].key\r\n\r\n    firebase: FirebaseApp\r\n    database: Database\r\n    firestore: Firestore\r\n    firebaseAnalitics: Analytics\r\n\r\n    constructor() {\r\n\r\n        const { app, database, firestore, analytics } = initDatabase()\r\n\r\n        this.firebase = app\r\n        this.database = database\r\n        this.firestore = firestore\r\n\r\n        //this.firebaseAnalitics = analytics\r\n\r\n        makeObservable(this, {\r\n            activeStory: observable,\r\n            activePanel: observable\r\n        })\r\n    }\r\n\r\n    toMainPanel() {\r\n        this.activePanel = this.activeStory\r\n    }\r\n\r\n    setActiveStory(activeStory: iPageKey, panel: string = '') {\r\n        this.activeStory = activeStory\r\n        this.activePanel = panel || activeStory\r\n    }\r\n\r\n    setActivePanel(panel: string = '') {\r\n        this.activePanel = panel\r\n    }\r\n}\r\n  \r\nvar globalStore =  new GlobalStore()  \r\nexport default globalStore","import { makeAutoObservable, observable } from 'mobx'\r\nimport { createGuid } from '../code/common/guid'\r\n\r\nexport class SnackbarsStore {\r\n\r\n    private snackbars: iShowedSnackbar[] = []\r\n    \r\n    get currentSnackbar(): iShowedSnackbar {\r\n        return this.snackbars[0]\r\n    }\r\n\r\n    constructor() {\r\n        makeAutoObservable(this)\r\n    }\r\n\r\n    showSnackbar(snackbar: iSnackbar) {\r\n\r\n        const id = createGuid()\r\n\r\n        const close = () => {\r\n\r\n            if(snackbar.callback) {\r\n                snackbar.callback()\r\n            }\r\n\r\n            this.closeSnackbar(id)\r\n        }\r\n\r\n        const _snackbar: iShowedSnackbar = { \r\n            ...snackbar, \r\n            id,\r\n            close\r\n         }\r\n         \r\n        this.snackbars = [...this.snackbars, _snackbar]\r\n\r\n        return _snackbar\r\n    }\r\n\r\n    closeSnackbar(id: string) {\r\n        this.snackbars = this.snackbars.filter(snackbar => snackbar.id !== id)\r\n    }\r\n}\r\n  \r\nexport interface iSnackbar {\r\n    message: string\r\n    callback?: () => void\r\n}\r\n\r\nexport interface iShowedSnackbar extends iSnackbar {\r\n    id: string\r\n    close: () => void\r\n}\r\n\r\nconst store = new SnackbarsStore()\r\nexport default store","module.exports = require(\"@firebase/firestore\");","module.exports = require(\"@vkontakte/icons\");","module.exports = require(\"@vkontakte/vkui\");","module.exports = require(\"crypto\");","module.exports = require(\"express\");","module.exports = require(\"express-useragent\");","module.exports = require(\"firebase-admin\");","module.exports = require(\"firebase/app\");","module.exports = require(\"firebase/database\");","module.exports = require(\"firebase/firestore\");","module.exports = require(\"fs\");","module.exports = require(\"mobx\");","module.exports = require(\"mobx-react-lite\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-hot-loader\");","module.exports = require(\"uuid\");"],"sourceRoot":""}